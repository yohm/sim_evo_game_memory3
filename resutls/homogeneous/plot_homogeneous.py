# %%
import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl
mpl.rcParams.update(mpl.rcParamsDefault)

#%%
plt.rcParams['font.family'] ='sans-serif'
plt.rcParams["figure.subplot.left"] = 0.2
plt.rcParams["figure.subplot.right"] = 0.95
plt.rcParams["figure.subplot.bottom"] = 0.20
plt.rcParams["figure.subplot.top"] = 0.95
plt.rcParams['xtick.direction'] = 'in'
plt.rcParams['ytick.direction'] = 'in'
plt.rcParams['xtick.major.width'] = 1.0
plt.rcParams['ytick.major.width'] = 1.0
plt.rcParams['axes.labelsize'] = 20
plt.rcParams['font.size'] = 20
plt.rcParams['axes.linewidth'] = 1.2
mpl.rcParams['lines.markersize'] = 6
plt.rcParams['savefig.dpi'] = 200
plt.rcParams['figure.facecolor'] = 'white'
plt.rcParams["errorbar.capsize"] = 2
plt.rcParams['lines.marker'] = 'o'
plt.rcParams['lines.linestyle'] = '-'

# %%
def set_axis():
  plt.clf()
  fig1, ax1 = plt.subplots()
  ax1.set_xscale("log")
  ax1.set_ylim(-0.02, 1.02)
  ax1.set_xlabel("population size, $N$")
  xlabels = [2, 4, 8, 16, 32, 64]
  ax1.set_xticks(xlabels)
  ax1.get_xaxis().set_major_formatter(mpl.ticker.ScalarFormatter())
  ax1.set_yticks([0, 0.5, 1])
  ax1.set_yticks([0.25,0.75], minor=True)
  return fig1, ax1


# %%

# http://localhost:3333/parameter_sets/631054e57a3aca027357d2a1?plot_type=line&x_axis=N&y_axis=.cooperation_level&series=benefit&irrelevants=#!tab-plot
fig1, ax1 = set_axis()
ax1.set_ylabel("cooperation level")

# benefit = 6.0
label = r'$b=6$'
marker = '^'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.18438487641114648, 0.2361721549549761, 0.2960328398817424, 0.9654951760912407, 0.9995894180873863, 0.9999969999856321, 0.9999969999856321, 0.9999969999856321, 0.9999969999856321, 0.9999969999856321, 0.9999969999856321]
yerr = [0.0002468655609824316, 0.0003600663548750291, 0.0005491888447735499, 0.0006117375554160409, 5.194028706848994e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
ax1.errorbar(x, y, yerr=yerr, label=label, marker=marker)

# benefit = 3.0
label = r'$b=3$'
marker = 'o'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.18424632111042177, 0.23486052005077807, 0.23828968025788946, 0.2617982650485312, 0.47183061495591855, 0.9727672611640463, 0.9990539199184024, 0.9999969999856321, 0.9999969999856321, 0.9999969999856321, 0.9999969999856321]
yerr = [0.00022055991329941762, 0.00019467512874823056, 0.00012114236741272032, 0.0004145944776316783, 0.0008803939122708319, 0.0008751900994973114, 0.00012837948822544886, 0.0, 0.0, 0.0, 0.0]
ax1.errorbar(x, np.array(y)-0.005, yerr=yerr, label=label, marker=marker)

# benefit = 1.5
label = r'$b=1.5$'
marker = 'v'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.1840529048390499, 0.23258913904311043, 0.23516913569697767, 0.23587627344348747, 0.2346374117749296, 0.22796505964263755, 0.22023576613604812, 0.2078645075577686, 0.19740235548207602, 0.18214482186527833, 0.17064664379733216]
yerr = [0.00017616957503345057, 0.0001601222711248621, 0.0002559635410219397, 0.0003208801163423085, 0.00022277105584724458, 0.00014592571125837371, 0.00041044071446243044, 0.00026514594468725187, 0.0003174181185509924, 0.00018946645734065401, 0.00020695022305126915]
ax1.errorbar(x, np.array(y)-0.005, yerr=yerr, label=label, marker=marker)

ax1.legend(loc='right')
fig1.savefig('m1_cooperation_level.pdf')
plt.show()

# %%
# http://localhost:3333/parameter_sets/631054e57a3aca027357d2a1?plot_type=line&x_axis=N&y_axis=.efficient_fraction&series=benefit&irrelevants=#!tab-plot
# efficient
fig1, ax1 = set_axis()
ax1.set_ylabel("fraction")

# benefit = 6.0
label = 'benefit=6.0'
marker = '^'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.022039246710274123, 0.05939351043723382, 0.13179781310868124, 0.956998952221058, 0.9994811105345672, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
yerr = [7.695696153696611e-05, 0.00022280820709768623, 0.0006666065084685616, 0.0007804557211845797, 6.482187061280623e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
ax1.errorbar(x, y, yerr=yerr, label=label, marker=marker)

# benefit = 3.0
label = 'benefit=3.0'
marker = 'o'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.022039024487804988, 0.05817739797488665, 0.060945845495383885, 0.09090465656072952, 0.3496969441077157, 0.9664858516509464, 0.9988356653729615, 1.0, 1.0, 1.0, 1.0]
yerr = [7.645612950605371e-05, 0.0001817308094645139, 9.431603769591453e-05, 0.00026111631057154, 0.0011252023259907388, 0.0010634077743649395, 0.00016092722992935737, 0.0, 0.0, 0.0, 0.0]
ax1.errorbar(x, np.array(y)-0.005, yerr=yerr, label=label, marker=marker)

# benefit = 1.5
label = 'benefit=1.5'
marker = 'v'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.021911691012990016, 0.05520361689290766, 0.056979174421304915, 0.0588735098594554, 0.0606850674278527, 0.05973206636896263, 0.05733528592809548, 0.0533839482043869, 0.05036594485104984, 0.04550393944882161, 0.042382491536101706]
yerr = [7.353874860075659e-05, 0.00013900314955045436, 0.00018966432797251832, 9.798368158223127e-05, 0.00017439164990252278, 7.309524252288261e-05, 0.0001653103050074445, 0.00018482914047533984, 0.00017118744679468485, 0.0001457323373048616, 0.0001638572243764864]
ax1.errorbar(x, np.array(y)-0.01, yerr=yerr, label=label, marker=marker)

#plt.legend()
fig1.savefig('m1_efficient.pdf')
plt.show()
# %%

# http://localhost:3333/parameter_sets/631054e57a3aca027357d2a1?plot_type=line&x_axis=N&y_axis=.defensible_fraction&series=benefit&irrelevants=#!tab-plot

# rivals
fig1, ax1 = set_axis()
ax1.set_ylabel("fraction")

# benefit = 6.0
label = 'benefit=6.0'
marker = '^'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.7831717590797324, 0.7220922467691631, 0.6690066322295914, 0.03248314720349689, 0.0003770004188893543, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
yerr = [0.00037575202093443293, 0.0004744827603573602, 0.0005938052779409305, 0.0005530288361721039, 4.599791889501161e-05, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
ax1.errorbar(x, y, yerr=yerr, label=label, marker=marker)

# benefit = 3.0
label = 'benefit=3.0'
marker = 'o'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.783487981653313, 0.7225601361779291, 0.7242125824584249, 0.70840867600964, 0.5078715643017382, 0.026023584470649414, 0.0009018898909887678, 0.0, 0.0, 0.0, 0.0]
yerr = [0.00037860989731645006, 0.0002510594454224958, 0.00034540669511324727, 0.000415260885078485, 0.0008749879005810573, 0.0008313991015719569, 0.00011793783401807825, 0.0, 0.0, 0.0, 0.0]
ax1.errorbar(x, np.array(y)-0.005, yerr=yerr, label=label, marker=marker)

# benefit = 1.5
label = 'benefit=1.5'
marker = 'v'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.7836882040980045, 0.7226319140354601, 0.7237691375212639, 0.7308963676626308, 0.7384891538768377, 0.7507651675168528, 0.7616841796490885, 0.7769885299872555, 0.7893095436772708, 0.8065138961265512, 0.8191590212878015]
yerr = [0.00023600572588413545, 0.00033494941931301613, 0.0004920237835139096, 0.00033750960872940255, 0.0003803324286454496, 0.00028452111269909884, 0.0004897770952441461, 0.00046005756764656733, 0.0004676599515783087, 0.0003259107174050098, 0.00035675758846951024]
ax1.errorbar(x, np.array(y)-0.01, yerr=yerr, label=label, marker=marker)

#plt.legend()
fig1.savefig("m1_rivals.pdf")
plt.show()
# %%

# http://localhost:3333/parameter_sets/631054e57a3aca027357d2a1?plot_type=line&x_axis=N&y_axis=.friendly_rival_fraction&series=benefit&irrelevants=#!tab-plot
# friendly rivals

fig1, ax1 = set_axis()
ax1.set_ylabel("fraction")

# benefit = 6.0
label = 'benefit=6.0'
marker = '^'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
yerr = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
ax1.errorbar(x, y, yerr=yerr, label=label, marker=marker)

# benefit = 3.0
label = 'benefit=3.0'
marker = 'o'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
yerr = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
ax1.errorbar(x, np.array(y)-0.005, yerr=yerr, label=label, marker=marker)

# benefit = 1.5
label = 'benefit=1.5'
marker = 'v'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
yerr = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
ax1.errorbar(x, np.array(y)-0.01, yerr=yerr, label=label, marker=marker)

#plt.legend()
fig1.savefig("m1_friendly_rivals.pdf")
plt.show()
# %%

# memory-3

# http://localhost:3333/parameter_sets/631049f27a3aca027357d161?plot_type=line&x_axis=N&y_axis=.cooperation_level&series=benefit&irrelevants=#!tab-plot
# cooperation level

fig1, ax1 = set_axis()
ax1.set_ylabel("cooperation level")

# benefit = 6.0
label = 'benefit=6.0'
marker = '^'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.22653579302553392, 0.3073607869455445, 0.3980676858729294, 0.6795593164952092, 0.7697289308471031, 0.8480422773384921, 0.8856792762328126, 0.9040256556528667, 0.9177955648975449, 0.9334676954655396, 0.9464091761757988]
yerr = [0.000208353297406166, 0.00043352076282757325, 0.0024390689662773433, 0.002543103086206744, 0.0036546221490088423, 0.0032620880383711086, 0.0021954031659637057, 0.00283471406854497, 0.004844012175451252, 0.005590131423225618, 0.0036298237268692413]
ax1.errorbar(x, y, yerr=yerr, label=label, marker=marker)

# benefit = 3.0
label = 'benefit=3.0'
marker = 'o'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.22650246519916503, 0.28846822270619676, 0.31751136639328786, 0.38947702285263414, 0.49896023746223844, 0.7326711910892848, 0.8063633826109132, 0.8487968251167676, 0.8849693623609081, 0.9079549960697972, 0.9249899296865228]
yerr = [0.0001941277937123277, 0.00031342078401503705, 0.0004352557614107801, 0.0014070725608082107, 0.003883560493068636, 0.003412594270295011, 0.00366361732470669, 0.0041846141290026884, 0.006011227042907552, 0.0025903547744590932, 0.003496265105418623]
ax1.errorbar(x, np.array(y)-0.005, yerr=yerr, label=label, marker=marker)

# benefit = 1.5
label = 'benefit=1.5'
marker = 'v'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.2263822077782031, 0.2770015235693795, 0.2796375136615472, 0.28179808202729084, 0.28212414815255665, 0.2812034146746167, 0.2786233302032461, 0.27296938205583193, 0.2678587060955308, 0.26968371902691823, 0.2603177814104375]
yerr = [0.00022877315747099137, 0.0003306324622773569, 0.0004422616954470094, 0.0004113894089284075, 0.0007319202658421454, 0.002293887345030976, 0.00090670886968243, 0.001065875043988464, 0.0020885222170560136, 0.00809222383783429, 0.0045740342218143415]
ax1.errorbar(x, np.array(y)-0.01, yerr=yerr, label=label, marker=marker)

#plt.legend()
fig1.savefig("m3_cooperation_level.pdf")
plt.show()
# %%
# http://localhost:3333/parameter_sets/631049f27a3aca027357d161?plot_type=line&x_axis=N&y_axis=.efficient_fraction&series=benefit&irrelevants=#!tab-plot
# efficient

fig1, ax1 = set_axis()
ax1.set_ylabel("fraction")

# benefit = 6.0
label = 'benefit=6.0'
marker = '^'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.02041302268113631, 0.06678251864724294, 0.1740556378395976, 0.54713771904191, 0.6617792908658788, 0.7720028577809531, 0.8271583635092927, 0.8484259426954919, 0.8555156172395748, 0.8643497381663758, 0.9087420097133443]
yerr = [9.406106160314359e-05, 0.0004300255129660868, 0.0032029372382772607, 0.003913891660319643, 0.006690657364354799, 0.005006184577874165, 0.005204445401302292, 0.005264927338266789, 0.01519137937154128, 0.02660557659749822, 0.013063330193768513]
ax1.errorbar(x, np.array(y), yerr=yerr, label=label, marker=marker)


# benefit = 3.0
label = 'benefit=3.0'
marker = 'o'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.020432133813482016, 0.04776705307450342, 0.07903531003923338, 0.16950841056490062, 0.31315912573236193, 0.6321607024007805, 0.7342407047118942, 0.7943455492728326, 0.8404858227620254, 0.8770073077858976, 0.8925149916833242]
yerr = [5.449322343202731e-05, 0.00021147854136726858, 0.0004994520249806873, 0.001872071101176658, 0.00478702641338269, 0.004700766171892596, 0.005376200576377355, 0.006038850733426386, 0.008230121031971394, 0.003967145697971034, 0.0076831197771724796]
ax1.errorbar(x, np.array(y)-0.005, yerr=yerr, label=label, marker=marker)

# benefit = 1.5
label = 'benefit=1.5'
marker = 'v'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.020355133727926362, 0.036367040407822675, 0.03886459873844304, 0.04298426998252221, 0.046235718039686714, 0.048548720609689566, 0.053000281111423464, 0.05469806077562308, 0.05225016916685463, 0.06355140394600439, 0.059668399631555145]
yerr = [6.006660506334164e-05, 0.00015094779624350016, 0.0001341277677638989, 0.00029385778007718494, 0.0006068892840649858, 0.0003309085746258405, 0.0009322243734047685, 0.0015951415682751633, 0.001420506400312384, 0.011228580029317597, 0.00666015200050556]
ax1.errorbar(x, np.array(y)-0.01, yerr=yerr, label=label, marker=marker)

#plt.legend()
fig1.savefig("m3_efficient.pdf")
plt.show()
# %%

# http://localhost:3333/parameter_sets/631049f27a3aca027357d161?plot_type=line&x_axis=N&y_axis=.defensible_fraction&series=benefit&irrelevants=#!tab-plot
# defensible

fig1, ax1 = set_axis()
ax1.set_ylabel("fraction")

# benefit = 6.0
label = 'benefit=6.0'
marker = '^'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.46204673560748405, 0.40184800205333565, 0.348010497789442, 0.1823625359583733, 0.1266268073631193, 0.08235320261466958, 0.06211506901674335, 0.049748277498086114, 0.038485931651035164, 0.029021810024233364, 0.02718958576620641]
yerr = [0.0005192284831965939, 0.00016612851680952728, 0.0013181358286290055, 0.0015136847912298817, 0.0024496535521949603, 0.001921574342312752, 0.0008578606251151484, 0.0015493341605859984, 0.0015726946757113316, 0.0018224876744186412, 0.0010277258012055578]

plt.errorbar(x, y, yerr=yerr, label=label, marker=marker)

# benefit = 3.0
label = 'benefit=3.0'
marker = 'o'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.46184840205378, 0.41314023682248535, 0.4008862232069147, 0.3619390688211876, 0.2977512197235775, 0.16006640007377787, 0.11727090807878675, 0.09373510415011573, 0.07171385745984163, 0.05868073186747985, 0.04681471868302076]
yerr = [0.0003739719984805128, 0.0005376235676306019, 0.0006585407430267603, 0.0008741727141192792, 0.0025736146262095166, 0.0020657675321325685, 0.002245239227197754, 0.002744183334525313, 0.003684515371204176, 0.0017525677653203668, 0.0020586404617690614]

plt.errorbar(x, np.array(y)-0.005, yerr=yerr, label=label, marker=marker)

# benefit = 1.5
label = 'benefit=1.5'
marker = 'v'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [0.46235129150143506, 0.41833513148347945, 0.4216849129832367, 0.4274821416468241, 0.433588148431276, 0.4428294920327689, 0.45321228134697933, 0.4662640736267485, 0.4782569758410843, 0.4913891015434462, 0.5048931165479073]
yerr = [0.0004260894937294928, 0.0004312868060792281, 0.0006896665568076633, 0.0006932762951589018, 0.0007731801301435972, 0.0013652213919780288, 0.0006810597884355079, 0.0008611285998206936, 0.001018408126131811, 0.005743773290577363, 0.0036313778752245]

plt.errorbar(x, np.array(y)-0.01, yerr=yerr, label=label, marker=marker)

fig1.savefig("m3_rivals.pdf")
plt.show()
# %%
# http://localhost:3333/parameter_sets/631049f27a3aca027357d161?plot_type=line&x_axis=N&y_axis=.friendly_rival_fraction&series=benefit&irrelevants=#!tab-plot

# friendly rivals

fig1, ax1 = set_axis()
ax1.set_ylabel("fraction")

# benefit = 6.0
label = 'benefit=6.0'
marker = '^'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [2.233335814817572e-05, 0.0007442230491367213, 0.0010294455882728759, 0.0009040010044455605, 0.0010408900454333839, 0.0007322230358033731, 0.0013528903921004357, 0.0010764456404951561, 0.00038400042666714076, 0.0005010005566672852, 0.00127277919197688]
yerr = [3.331072891088015e-06, 6.435842183404946e-05, 0.00022674964679626235, 0.00023123249014305136, 0.0003059057647307464, 0.00020131306159908884, 0.0005748519453171044, 0.0004847392871235937, 0.00028928856392147035, 0.00026704989061190204, 0.0007777131409090566]

plt.errorbar(x, y, yerr=yerr, label=label, marker=marker)

# benefit = 3.0
label = 'benefit=3.0'
marker = 'o'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [3.2111146790163105e-05, 0.0010780011977791087, 0.001674779638644043, 0.0019870022077802313, 0.00172477969419966, 0.0020396689329654815, 0.0008007786675318527, 0.0006713340792600881, 0.0033538926154362395, 0.0005838895376550419, 0.001662890736545263]
yerr = [4.075593472388096e-06, 0.00023299788923414916, 0.000275350241673095, 0.0003460688399706301, 0.0003052974263090688, 0.0006883213796762105, 0.0003033053169135292, 0.00028114366680070013, 0.0011118248001551528, 0.00035937698381550905, 0.0013432987911345057]

plt.errorbar(x, np.array(y)-0.005, yerr=yerr, label=label, marker=marker)

# benefit = 1.5
label = 'benefit=1.5'
marker = 'v'
x = [2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64]
y = [3.700004111115679e-05, 0.0010417789353099282, 0.0012240013600015112, 0.0021283356981507758, 0.0027961142179046866, 0.00557656175173528, 0.004759338621487357, 0.007372008191120214, 0.010704011893346549, 0.014340682600758447, 0.016530018366687074]
yerr = [4.466155660436299e-06, 0.00017939257414257892, 0.00016486045156723498, 0.00031890052404878126, 0.00019318869806721697, 0.003028709030958491, 0.0005064726988925207, 0.0009104451788223136, 0.0018251112675431117, 0.003311788229724101, 0.0023671399333860484]

plt.errorbar(x, np.array(y)-0.01, yerr=yerr, label=label, marker=marker)

#plt.legend()
fig1.savefig("m3_friendly_rivals.pdf")
plt.show()
# %%
